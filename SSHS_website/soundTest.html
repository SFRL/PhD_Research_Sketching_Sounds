<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Sound test</title>
</head>


<style>
    .playbutton {
        width: 100px;
        height: 50px;
        border: 2px solid black;
        background-color: grey;
        text-align: center;
    }
</style>

<body>
    <script>
        let id = setInterval(frame, 5);
        let play = false;

        let sound = document.createElement("audio");
        sound.src = 'audio/sound1.mp3';

        let newDIV = document.createElement("DIV");
        newDIV.className = "playbutton";
        newDIV.addEventListener("click", function () { sound.play() });
        newDIV.innerHTML = "Play";
        document.body.appendChild(newDIV);


        newDIV = document.createElement("DIV");
        newDIV.className = "playbutton";
        newDIV.addEventListener("click", playWorkaround);
        newDIV.innerHTML = "Play through looped function";
        document.body.appendChild(newDIV);

        function playWorkaround() {
            sound.pause();
            
            sound.muted = true;
            sound.play();
            play = true;
        }
 
        function frame() {
            if (play) {
                sound.currentTime = 1;
                console.log(sound.currentTime);   
                sound.muted = false;
                play = false;
            }
        }

    </script>
</body>
</html>
